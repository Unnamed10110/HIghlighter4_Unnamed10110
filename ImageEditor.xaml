<Window x:Class="Highlighter4.ImageEditor"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Image Editor" 
        Height="800" 
        Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#FF0D1117"
        Foreground="White"
        WindowStyle="SingleBorderWindow"
        ResizeMode="CanResize"
        Icon="Lambda.ico">
    
    <Window.Resources>
        <!-- Tema OLED Oscuro -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="#FF21262D"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#FF30363D"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"
                                            Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF30363D"/>
                                <Setter Property="BorderBrush" Value="#FF58A6FF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF1F6FEB"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style TargetType="ToolBar">
            <Setter Property="Background" Value="#FF161B22"/>
            <Setter Property="BorderBrush" Value="#FF30363D"/>
        </Style>
        
        <Style TargetType="Separator">
            <Setter Property="Background" Value="#FF30363D"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Toolbar Superior -->
        <ToolBar Grid.Row="0" Height="50">
            <StackPanel Orientation="Horizontal">
                <!-- File Tools -->
                <Button Name="SaveButton" Content="ðŸ’¾ Save" Click="SaveButton_Click" ToolTip="Auto-save to Downloads/Highlighter4/ (Ctrl+S)"/>
                <Button Name="CopyButton" Content="ðŸ“‹ Copy" Click="CopyButton_Click" ToolTip="Copy to clipboard (Ctrl+C)"/>
                <Separator/>
                
                <!-- Edit Tools -->
                <Button Name="UndoButton" Content="â†¶ Undo" Click="UndoButton_Click" ToolTip="Undo (Ctrl+Z)"/>
                <Button Name="RedoButton" Content="â†· Redo" Click="RedoButton_Click" ToolTip="Redo (Ctrl+Y)"/>
                <Separator/>
                
                <!-- Drawing Tools -->
                <Button Name="ArrowToolButton" Content="F1 â–¶ Arrow" Click="ArrowToolButton_Click" ToolTip="Create arrows (F1)"/>
                <Button Name="LineToolButton" Content="F2 âž– Line" Click="LineToolButton_Click" ToolTip="Draw lines (F2)"/>
                <Button Name="RectangleToolButton" Content="F3 â¬œ Rectangle" Click="RectangleToolButton_Click" ToolTip="Draw rectangles (F3)"/>
                <Button Name="HighlighterToolButton" Content="F4 ðŸ– Highlight" Click="HighlighterToolButton_Click" ToolTip="Highlight (F4)"/>
                <Button Name="BlurToolButton" Content="F5 ðŸŒ« Blur" Click="BlurToolButton_Click" ToolTip="Blur effect (F5)"/>
                <Button Name="SpeechToolButton" Content="F6 ðŸ’¬ Speech" Click="SpeechToolButton_Click" ToolTip="Speech balloons (F6)"/>
                <Button Name="CropToolButton" Content="F7 âœ‚ï¸ Crop" Click="CropToolButton_Click" ToolTip="Crop image (F7)"/>
            </StackPanel>
        </ToolBar>
        
        <!-- Canvas Principal -->
        <ScrollViewer Grid.Row="1" 
                      Background="#FF0D1117" 
                      HorizontalScrollBarVisibility="Auto" 
                      VerticalScrollBarVisibility="Auto">
            <Canvas Name="MainCanvas" 
                    Background="Transparent"
                    MouseDown="Canvas_MouseDown"
                    MouseMove="Canvas_MouseMove"
                    MouseUp="Canvas_MouseUp"
                    Width="1000" 
                    Height="700"/>
        </ScrollViewer>
        
        <!-- Status Bar -->
        <StatusBar Grid.Row="2" Background="#FF161B22" Foreground="White" Height="25">
            <StatusBarItem>
                <TextBlock Name="StatusText" Text="Ready - Select a tool"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Name="PositionText" Text="X: 0, Y: 0"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
